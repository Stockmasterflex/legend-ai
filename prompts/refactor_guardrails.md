When refactoring:
- Preserve I/O contracts; maintain Pydantic models and endpoints.
- Add type hints; remove dead code; split >50 line functions.
- Keep behavior; add tests before changes; ensure CI stays green.


